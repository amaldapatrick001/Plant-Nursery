{% extends 'partials/base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}
    <!-- Hero Section -->
    <section id="home-section" class="hero">
        <div class="home-slider owl-carousel">
            <div class="slider-item" style="background-image: url('{% static 'images/nur3.jpeg' %}');">
                <div class="overlay"></div>
                <div class="container">
                    <div class="row slider-text justify-content-center align-items-center">
                        <div class="col-md-12 ftco-animate text-center">
                            <h1 class="mb-2">Nurturing Your Plants with Care</h1>
                            <h2 class="subheading mb-4">We provide quality plants and planting support</h2>
                            <p><a href="#featured-section" class="btn btn-primary btn-lg">Explore Plants</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slider-item" style="background-image: url('{% static 'images/nur4.jpeg' %}');">
                <div class="overlay"></div>
                <div class="container">
                    <div class="row slider-text justify-content-center align-items-center">
                        <div class="col-sm-12 ftco-animate text-center">
                            <h1 class="mb-2">100% Healthy & Thriving Plants</h1>
                            <h2 class="subheading mb-4">We provide planting guidance and supplies</h2>
                            <p><a href="#expert-section" class="btn btn-primary btn-lg">Meet Our Experts</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="ftco-section services-section ">
        <div class="container">
            <div class="row justify-content-center mb-5">
                <div class="col-md-7 heading-section text-center ftco-animate">
                    <span class="subheading">Services</span>
                    <h2 class="mb-4">Our Services</h2>
                    <p>We offer comprehensive plant care solutions</p>
                </div>
            </div>
            <div class="row no-gutters ftco-services">
                <div class="col-md-3 text-center d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services mb-md-0 mb-4">
                        <div class="icon bg-color-1 active d-flex justify-content-center align-items-center mb-2">
                            <span class="flaticon-shipped"></span>
                        </div>
                        <div class="media-body">
                            <h3 class="heading">Free Delivery</h3>
                            <span>On orders over $50</span>
                        </div>
                    </div>      
                </div>
                <div class="col-md-3 text-center d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services mb-md-0 mb-4">
                        <div class="icon bg-color-2 d-flex justify-content-center align-items-center mb-2">
                            <span class="flaticon-diet"></span>
                        </div>
                        <div class="media-body">
                            <h3 class="heading">Always Green</h3>
                            <span>Carefully nurtured plants</span>
                        </div>
                    </div>    
                </div>
                <div class="col-md-3 text-center d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services mb-md-0 mb-4">
                        <div class="icon bg-color-3 d-flex justify-content-center align-items-center mb-2">
                            <span class="flaticon-award"></span>
                        </div>
                        <div class="media-body">
                            <h3 class="heading">Top Quality</h3>
                            <span>Healthy and vibrant plants</span>
                        </div>
                    </div>      
                </div>
                <div class="col-md-3 text-center d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services mb-md-0 mb-4">
                        <div class="icon bg-color-4 d-flex justify-content-center align-items-center mb-2">
                            <span class="flaticon-customer-service"></span>
                        </div>
                        <div class="media-body">
                            <h3 class="heading">Expert Support</h3>
                            <span>24/7 gardening help</span>
                        </div>
                    </div>      
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="ftco-section ftco-category ftco-no-pt" id="featured-section">
        <div class="container">
            <div class="row justify-content-center mb-5">
                <div class="col-md-7 heading-section text-center ftco-animate">
                    <span class="subheading">Discover</span>
                    <h2 class="mb-4">Plant Categories</h2>
                    <p>Find the perfect plants for your space</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-6 order-md-last align-items-stretch d-flex">
                            <div class="category-wrap-2 ftco-animate img align-self-stretch d-flex" style="background-image: url('{% static 'images/category.jpg' %}');">
                                <div class="text text-center">
                                    <h2>Plants</h2>
                                    <p>Caring for your garden, one plant at a time</p>
                                    <p><a href="#" class="btn btn-primary">Shop Plants</a></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="category-wrap ftco-animate img mb-4 d-flex align-items-end" style="background-image: url('{% static 'images/h21.jpeg' %}');">
                                <div class="text px-3 py-1">
                                    <h2 class="mb-0"><a href="#">Indoor Plants</a></h2>
                                </div>
                            </div>
                            <div class="category-wrap ftco-animate img d-flex align-items-end" style="background-image: url('{% static 'images/h22.jpeg' %}');">
                                <div class="text px-3 py-1">
                                    <h2 class="mb-0"><a href="#">Flowering Plants</a></h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="category-wrap ftco-animate img mb-4 d-flex align-items-end" style="background-image: url('{% static 'images/tree.jpeg' %}');">
                        <div class="text px-3 py-1">
                            <h2 class="mb-0"><a href="#">Tree</a></h2>
                        </div>      
                    </div>
                    <div class="category-wrap ftco-animate img d-flex align-items-end" style="background-image: url('{% static 'images/h23.jpeg' %}');">
                        <div class="text px-3 py-1">
                            <h2 class="mb-0"><a href="#">Tools</a></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recommended Products Section -->
    {% if recommended_products %}
    <section class="ftco-section" id="recommendations-section">
        <div class="container">
            <div class="row justify-content-center mb-5">
                <div class="col-md-7 heading-section text-center ftco-animate">
                    <span class="subheading">Just For You</span>
                    <h2 class="mb-4">Recommended Plants</h2>
                    <p>Discover plants that match your style and growing conditions</p>
                </div>
            </div>

            <div class="expert-carousel owl-carousel">
                {% for batch in recommended_products %}
                <div class="item">
                    <div class="expert-card product-recommendation d-flex flex-column">
                        <!-- Fixed height image container -->
                        <div class="expert-image">
                            {% if batch.product.image_1 %}
                            <img src="{{ batch.product.image_1.url }}" alt="{{ batch.product.name }}" class="img-fluid">
                            {% endif %}
                            {% if batch.recommendation_reason %}
                            <div class="expert-rating recommendation-tag">
                                <i class="fas fa-star"></i>
                                <span>{{ batch.recommendation_reason }}</span>
                            </div>
                            {% endif %}
                            {% if batch.discount %}
                            <div class="discount-tag">
                                <span>{{ batch.discount }}% OFF</span>
                            </div>
                            {% endif %}
                        </div>

                        <!-- Content with flex-grow -->
                        <div class="expert-info d-flex flex-column flex-grow-1">
                            <h3 class="expert-name text-truncate">{{ batch.product.name }}</h3>
                            
                            {% if batch.product.plant_category %}
                            <p class="expertise-area mb-2">
                                <i class="fas fa-leaf"></i> {{ batch.product.plant_category.name }}
                            </p>
                            {% endif %}
                            
                            <div class="rating-stars mb-2">
                                {% if batch.avg_rating %}
                                    {% with ''|center:batch.avg_rating|make_list as stars %}
                                    {% for _ in stars %}
                                    <i class="fas fa-star"></i>
                                    {% endfor %}
                                    {% endwith %}
                                    <span>({{ batch.avg_rating|floatformat:1 }})</span>
                                {% else %}
                                    <span class="no-review">No Reviews Yet</span>
                                {% endif %}
                            </div>

                            <!-- Push price and buttons to bottom -->
                            <div class="mt-auto">
                                <div class="price-info mb-3">
                                    {% if batch.discount %}
                                    <span class="original-price">₹{{ batch.price }}</span>
                                    <span class="discounted-price">₹{{ batch.discounted_price }}</span>
                                    {% else %}
                                    <span class="current-price">₹{{ batch.price }}</span>
                                    {% endif %}
                                </div>
                                
                                <div class="action-buttons">
                                    <a href="{% url 'products:cproduct_list' %}?product_id={{ batch.product.id }}" 
                                       class="btn btn-sm btn-outline-success">View Details</a>
                                    <button class="btn btn-sm btn-outline-primary wishlist-btn">
                                        <i class="far fa-heart"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    Expert Section
    <section class="ftco-section" id="expert-section">
        <div class="container">
            <div class="row justify-content-center mb-5">
                <div class="col-md-7 heading-section text-center ftco-animate">
                    <span class="subheading">Our Experts</span>
                    <h2 class="mb-4">Plant Care Specialists</h2>
                    <p>Connect with experienced professionals who are passionate about nurturing your plants</p>
                </div>
            </div>

            <div class="expert-carousel owl-carousel">
                {% if experts %}
                    {% for expert in experts %}
                    <div class="item">
                        <div class="expert-card">
                            <div class="expert-image">
                                {% if expert.profile_picture %}
                                    <img src="{{ expert.profile_picture.url }}" alt="{{ expert.user.first_name }}" class="img-fluid">
                                {% else %}
                                    <img src="{% static 'images/default-expert.jpg' %}" alt="Default Profile" class="img-fluid">
                                {% endif %}
                                <div class="expert-rating">
                                    <i class="fas fa-star"></i>
                                    <span>{{ expert.rating|floatformat:1 }}</span>
                                </div>
                            </div>
                            <div class="expert-info">
                                <h3 class="expert-name">{{ expert.user.first_name }} {{ expert.user.last_name }}</h3>
                                <p class="expertise-area">
                                    <i class="fas fa-leaf"></i> {{ expert.expertise_area }}
                                </p>
                                <br><a href="#" class="btn btn-sm btn-outline-success">Consult Now</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="col-12 text-center no-experts">
                        <i class="fas fa-user-tie fa-3x mb-3"></i>
                        <h3>No Experts Available</h3>
                        <p>Please check back later for expert consultations.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
    <hr>

    <style>
        /* Global Styles */
        .ftco-section {
            padding: 6em 0;
        }

        .heading-section {
            margin-bottom: 3em;
        }

        .subheading {
            font-size: 18px;
            display: block;
            margin-bottom: 10px;
            color: #82ae46;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Hero Section */
        .hero {
            position: relative;
            height: 100vh;
            min-height: 600px;
        }

        .slider-item {
            height: 100vh;
            min-height: 600px;
            background-size: cover;
            background-position: center;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
        }

        /* Product Cards */
        .product-card {
            background: white;
            border: none;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .product-image {
            height: 250px;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .recommendation-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #82ae46;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 1;
        }

        .discount-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        /* Prices */
        .original-price {
            font-size: 0.9em;
            text-decoration: line-through;
            color: #6c757d;
        }

        .current-price {
            font-size: 1.1em;
            font-weight: 600;
            color: #28a745;
        }

        /* Buttons */
        .btn-primary {
            background: #82ae46;
            border-color: #82ae46;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: #72a436;
            border-color: #72a436;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            border-color: #28a745;
            transition: all 0.3s ease;
        }

        .btn-success:hover {
            background: #218838;
            border-color: #218838;
            transform: translateY(-2px);
        }

        .btn-outline-danger {
            color: #dc3545;
            border-color: #dc3545;
            transition: all 0.3s ease;
        }

        .btn-outline-danger:hover {
            background: #dc3545;
            color: white;
            transform: translateY(-2px);
        }

        /* Services Section */
        .services .icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        /* Animations */
        .ftco-animate {
            opacity: 0;
            visibility: hidden;
        }

        .ftco-animated {
            opacity: 1;
            visibility: visible;
        }

        /* Expert Cards Styling */
        .expert-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            margin: 10px;
            max-width: 280px;
        }

        .expert-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .expert-image {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .expert-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .expert-card:hover .expert-image img {
            transform: scale(1.05);
        }

        .expert-rating {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, #82ae46, #72a436);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .expert-info {
            padding: 1.2rem;
            background: white;
            text-align: center;
        }

        .expert-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 5px;
        }

        .expertise-area {
            font-size: 0.9rem;
            color: #82ae46;
            margin-bottom: 8px;
            padding: 4px 12px;
            background: rgba(130, 174, 70, 0.1);
            border-radius: 15px;
            display: inline-block;
        }

        .expert-description {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .btn-outline-success {
            border-color: #82ae46;
            color: #82ae46;
            border-radius: 20px;
            padding: 5px 15px;
            transition: all 0.3s ease;
        }

        .btn-outline-success:hover {
            background: #82ae46;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(130, 174, 70, 0.3);
        }

        /* Carousel Navigation */
        .expert-carousel .owl-nav {
            margin-top: 20px;
        }

        .expert-carousel .owl-nav button {
            width: 40px;
            height: 40px;
            border-radius: 50% !important;
            background: #82ae46 !important;
            color: white !important;
            margin: 0 5px;
            transition: all 0.3s ease;
        }

        .expert-carousel .owl-nav button:hover {
            background: #72a436 !important;
            transform: translateY(-2px);
        }

        .expert-carousel .owl-dots {
            margin-top: 20px;
        }

        .expert-carousel .owl-dot span {
            background: #d1d8e0 !important;
            transition: all 0.3s ease;
        }

        .expert-carousel .owl-dot.active span {
            background: #82ae46 !important;
            width: 25px;
        }

        /* Expert Section Styling */
        #expert-section {
            padding: 5em 0;
        }

        .expert-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            margin: 10px;
            max-width: 280px;
        }

        .expert-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .expert-image {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .expert-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .expert-card:hover .expert-image img {
            transform: scale(1.05);
        }

        .expert-rating {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, #82ae46, #72a436);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .expert-info {
            padding: 1.2rem;
            background: white;
            text-align: center;
        }

        .no-experts {
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            color: #666;
        }

        .no-experts i {
            color: #82ae46;
            margin-bottom: 15px;
        }

        /* Carousel Styling */
        .recommendation-carousel {
            padding: 20px 40px;
        }

        .recommendation-carousel .owl-nav button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50% !important;
            background: #82ae46 !important;
            color: white !important;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .recommendation-carousel .owl-nav button:hover {
            background: #72a436 !important;
            transform: translateY(-50%) scale(1.1);
        }

        .recommendation-carousel .owl-prev {
            left: -20px;
        }

        .recommendation-carousel .owl-next {
            right: -20px;
        }

        .recommendation-carousel .owl-dots {
            margin-top: 20px;
        }

        .recommendation-carousel .owl-dot span {
            background: #d6d6d6 !important;
            transition: all 0.3s ease;
        }

        .recommendation-carousel .owl-dot.active span {
            background: #82ae46 !important;
            transform: scale(1.2);
        }

        /* Animation for items */
        .owl-item {
            opacity: 0.4;
            transform: scale(0.95);
            transition: all 0.3s ease;
        }

        .owl-item.active {
            opacity: 1;
            transform: scale(1);
        }

        .owl-item.active .product-card {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        /* Smooth sliding effect */
        .owl-carousel .owl-stage {
            transition: all 0.8s ease !important;
        }

        /* Product card hover effect */
        .product-card {
            transition: all 0.3s ease;
            margin: 10px;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        /* Make sure images are consistent */
        .product-image-wrapper {
            height: 250px;
            overflow: hidden;
            border-radius: 15px 15px 0 0;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        /* Additional Carousel Styling */
        .recommendation-carousel .owl-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            pointer-events: none;
            padding: 0 -15px;
        }

        .recommendation-carousel .owl-nav button {
            width: 40px;
            height: 40px;
            background: rgba(130, 174, 70, 0.9) !important;
            border-radius: 50% !important;
            color: white !important;
            font-size: 20px !important;
            transition: all 0.3s ease;
            pointer-events: auto;
        }

        .recommendation-carousel .owl-nav button:hover {
            background: rgba(130, 174, 70, 1) !important;
            transform: scale(1.1);
        }

        .recommendation-carousel .owl-dots {
            margin-top: 20px;
        }

        .recommendation-carousel .owl-dot span {
            background: #d6d6d6 !important;
            transition: all 0.3s ease;
        }

        .recommendation-carousel .owl-dot.active span {
            background: #82ae46 !important;
            width: 25px;
        }

        .recommendation-carousel .item {
            padding: 10px;
        }

        /* Animation for cards */
        .product-card {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hover effects */
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        /* Custom navigation arrows */
        .owl-nav button i {
            font-size: 16px !important;
        }

        /* Loading animation */
        .recommendation-carousel.owl-loading {
            opacity: 0;
            transition: all 0.3s ease;
        }

        /* Smooth transitions */
        .owl-carousel .owl-item {
            transition: all 0.3s ease;
        }

        /* Active item emphasis */
        .owl-carousel .owl-item.active.center {
            transform: scale(1.05);
            z-index: 2;
        }

        /* Matching Expert Section Style */
        .product-recommendation {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            margin: 10px;
            max-width: 280px;
        }

        .product-recommendation:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .product-recommendation .expert-image {
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .product-recommendation .expert-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .product-recommendation:hover .expert-image img {
            transform: scale(1.05);
        }

        .recommendation-tag {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(45deg, #82ae46, #72a436);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .discount-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .expert-info {
            padding: 1.5rem;
            text-align: center;
        }

        .expert-name {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .expertise-area {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .expertise-area i {
            color: #82ae46;
        }

        .rating-stars {
            color: #ffd700;
            margin-bottom: 1rem;
        }

        .rating-stars span {
            color: #666;
            margin-left: 5px;
        }

        .price-info {
            margin-bottom: 1rem;
        }

        .original-price {
            text-decoration: line-through;
            color: #999;
            margin-right: 10px;
        }

        .discounted-price, .current-price {
            color: #82ae46;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .btn-outline-success {
            color: #82ae46;
            border-color: #82ae46;
            transition: all 0.3s ease;
        }

        .btn-outline-success:hover {
            background: #82ae46;
            color: white;
            transform: translateY(-2px);
        }

        .wishlist-btn {
            width: 38px;
            height: 38px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border-color: #82ae46;
            color: #82ae46;
        }

        .wishlist-btn:hover {
            background: #82ae46;
            color: white;
            transform: translateY(-2px);
        }

        /* Updated card sizing for 4 items */
        .product-recommendation {
            max-width: 100%; /* Remove fixed width */
            margin: 8px;
        }

        .expert-image {
            height: 180px; /* Slightly reduced height */
        }

        /* Adjusted spacing for 4 items */
        .expert-info {
            padding: 1.2rem;
        }

        /* Responsive font sizes */
        .expert-name {
            font-size: 1.1rem;
        }

        .expertise-area {
            font-size: 0.85rem;
        }

        .price-info {
            font-size: 0.95rem;
        }

        /* Adjusted carousel navigation for 4 items */
        .expert-carousel .owl-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        .expert-carousel .owl-nav button {
            position: absolute;
            pointer-events: auto;
        }

        .expert-carousel .owl-prev {
            left: -20px;
        }

        .expert-carousel .owl-next {
            right: -20px;
        }

        .no-review {
            color: #999;
            font-size: 0.9rem;
            font-style: italic;
        }

        /* Update existing rating-stars class */
        .rating-stars {
            color: #ffd700;
            font-size: 0.9rem;
            min-height: 24px; /* Ensures consistent height whether there are reviews or not */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
    </style>

    <script>
    $(document).ready(function(){
        $('.home-slider').owlCarousel({
            loop: true,
            margin: 0,
            autoplay: true,
            autoplayTimeout: 5000,
            autoplayHoverPause: true,
            items: 1,
            
            
            onInitialized: function(e) {
                // Add slide counter
                var items = e.item.count;
                var current = e.item.index - 2;
                if (current < 0) {
                    current = items;
                }
                if (current > items) {
                    current = 1;
                }
                 },
            onTranslated: function(e) {
                // Update slide counter
                var items = e.item.count;
                var current = e.item.index - 2;
                if (current < 0) {
                    current = items;
                }
                if (current > items) {
                    current = 1;
                }
                $('.slide-counter').html('Slide ' + current + ' of ' + items);
            }
        });

        // Smooth scroll for anchor links
        $('a[href^="#"]').on('click', function(event) {
            event.preventDefault();
            $('html, body').animate({
                scrollTop: $($.attr(this, 'href')).offset().top
            }, 800);
        });

        $('.expert-carousel').owlCarousel({
            loop: true,
            margin: 15,  // Reduced margin
            nav: true,
            dots: true,
            autoplay: true,
            autoplayTimeout: 3000,
            autoplayHoverPause: true,
            responsive: {
                0: {
                    items: 1,
                    margin: 10
                },
                576: {
                    items: 2,
                    margin: 12
                },
                768: {
                    items: 3,
                    margin: 15
                },
                1200: {
                    items: 4,  // Show 4 items on large screens
                    margin: 15
                }
            },
            navText: [
                "<i class='fas fa-chevron-left'></i>",
                "<i class='fas fa-chevron-right'></i>"
            ],
            onInitialized: function() {
                // Ensure smooth transition
                setTimeout(function() {
                    $('.expert-carousel').css('opacity', '1');
                }, 200);
            }
        });
    });
    </script>

    <style>
        /* Additional responsive adjustments */
        @media (max-width: 1200px) {
            .product-recommendation {
                margin: 6px;
            }
            .expert-info {
                padding: 1rem;
            }
        }

        @media (max-width: 768px) {
            .expert-image {
                height: 200px;
            }
            .expert-name {
                font-size: 1.2rem;
            }
        }

        /* Smooth loading */
        .expert-carousel {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
    </style>
{% endblock content %}
</html>